{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["getWeatherImgByIconDay","iconDay","toString","Page","useState","daily","setDaily","list","setList","selected","setSelected","currentValue","find","item","performanceId","Promise","all","get","then","weatherData","data","airData","resData","array1","array2","key","grouped","_","groupBy","concat","map","group","assign","apply","mergeArraysByKey","console","log","slice","className","onClick","toPng","document","querySelector","imgData","base64String","fileName","link","createElement","href","download","click","downloadBase64Image","id","style","width","height","background","backgroundSize","date","Date","fxDate","getDay","format","src","alt","tempMin","tempMax","windDirDay","windScaleDay","marginLeft","category","backgroundImage","posterUrl","name","showTimeRange","address","value","onChange","e","target","Radio","display","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","App","getElementById"],"mappings":"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","file":"static/js/main.c4229329.chunk.js","sourcesContent":["import { useState } from \"react\";\nimport { get } from \"axios\";\nimport { format } from \"date-fns\";\nimport _ from \"lodash\";\nimport { Radio, RadioGroup } from \"zent\";\nimport { toPng } from \"html-to-image\";\n\nconst getWeekStr = (date) => {\n  const week = [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"];\n  return week[date.getDay()];\n};\n\nfunction mergeArraysByKey(array1, array2, key) {\n  let grouped = _.groupBy(array1.concat(array2), key);\n  return _.map(grouped, (group) => _.assign.apply(_, group));\n}\n\nexport function downloadBase64Image(base64String, fileName) {\n  const link = document.createElement(\"a\");\n  link.href = base64String;\n  link.download = fileName;\n  link.click();\n}\n\nconst getWeatherImgByIconDay = (iconDay) => {\n  switch (iconDay.toString()) {\n    case \"100\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/Ftk19JKB_qYjbgO-4GB_6nKLXbD1.png\";\n    case \"101\":\n    case \"102\":\n    case \"103\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/FvxdSi2ZAcveEQL6XdXrBEfip2p_.png\";\n    case \"104\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/Fnlj1Z0eIMJWdDlE9I-NBdxR55Wo.png\";\n    case \"300\":\n    case \"301\":\n    case \"302\":\n    case \"303\":\n    case \"304\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/Ftqk5Xwl26G5_xTOfvg7bzPms2p8.png\";\n    case \"305\":\n    case \"309\":\n    case \"314\":\n    case \"399\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/FrobFAn5OLQoZnsnx9CBIyHMqTrZ.png\";\n    case \"306\":\n    case \"315\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/FoX7ij4gDQPeMJv0tdbKZ5HH7c0q.png\";\n    case \"307\":\n    case \"316\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/Ft2oh0Xr0Wmsr7VABKN-D5cuw6jw.png\";\n    case \"308\":\n    case \"317\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/Fpv92CDw-oPEtglZvCOXfL0svymz.png\";\n    case \"310\":\n    case \"311\":\n    case \"312\":\n    case \"318\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/FlwgwIZKbgYvidHx1y0PLPXOzW2p.png\";\n    case \"313\":\n    case \"404\":\n    case \"405\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/FpexEyEq_cdBrzMTudTOS6P_jYpY.png\";\n    case \"400\":\n    case \"408\":\n    case \"499\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/Fkk1h8TyxqwxLOLNTelq08-h7rh0.png\";\n    case \"401\":\n    case \"409\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/Fl4ojMIEEhDufBwUiE6_bqxqmLb8.png\";\n    case \"402\":\n    case \"410\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/FvIhDxJ4uAnAgQ0mdQYVN0ug0NLF.png\";\n    case \"403\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/FrlPHyArYGayYS_qfo0JTmfpdlcJ.png\";\n    case \"406\":\n    case \"407\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/Fu2moLSd7usM7DqQVaBjpaLrrEX5.png\";\n    case \"500\":\n    case \"501\":\n    case \"502\":\n    case \"509\":\n    case \"510\":\n    case \"511\":\n    case \"512\":\n    case \"513\":\n    case \"514\":\n    case \"515\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/FpBbuDB9COxRBGUjq5GO_uVKj758.png\";\n    case \"503\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/FgOC4IeNsIbI-WVd9fji1Y-UM_b2.png\";\n    case \"504\":\n    case \"507\":\n    case \"508\":\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/FmGbl54EUiEJ5aPbOHZGvUmPb1hT.png\";\n    default:\n      return \"https://img01.yzcdn.cn/upload_files/2023/07/31/Ftk19JKB_qYjbgO-4GB_6nKLXbD1.png\";\n  }\n};\n\nconst Page = () => {\n  const [daily, setDaily] = useState([]);\n  const [list, setList] = useState([]);\n  const [selected, setSelected] = useState(\"\");\n\n  const currentValue = list.find((item) => item.performanceId === selected);\n\n  useState(() => {\n    Promise.all([\n      get(\n        \"https://devapi.qweather.com/v7/weather/7d?location=101210109&key=536f0333e42f40bca3c44f43f91f921e\"\n      ),\n      get(\n        \"https://devapi.qweather.com/v7/air/5d?location=101210109&key=536f0333e42f40bca3c44f43f91f921e\"\n      ),\n    ]).then(([{ data: weatherData }, { data: airData }]) => {\n      const resData = mergeArraysByKey(\n        weatherData.daily,\n        airData.daily,\n        \"fxDate\"\n      );\n      console.log(resData, \"res data\");\n      setDaily(resData.slice(1, 6));\n    });\n    get(\n      `https://yanchu.maoyan.com/myshow/ajax/channelPage/wonderPerfs?p=1&s=20&ct=9&st=15&optimus_risk_level=71&optimus_code=10&uuid=35d7d0a375f841e295c2011ac803c6e4a158458781335150377&sellChannel=1&cityId=3&lng=120.08712448460645&lat=30.25695654285865&token=4f9f9e09ce1a1d6e47d46662e1b2d4effcfb02b5c2547988c95f1a0f70223eeeb8231e298cf2eca624aeb48179142e56e14c63aff9345ca10c03a18ba9dbb7b1&yodaReady=h5&csecplatform=4&csecversion=2.1.0`\n    ).then(({ data }) => setList(data.data));\n  }, []);\n\n  const exportImg = () => {\n    toPng(document.querySelector(\"#poster-container\")).then((imgData) => {\n      downloadBase64Image(imgData, \"output.png\");\n    });\n  };\n\n  return (\n    <div className=\"flex\">\n      <div>\n        <button onClick={exportImg}>导出</button>\n        <div className=\"scale\">\n          <div\n            id=\"poster-container\"\n            style={{\n              width: 1448,\n              height: 1086,\n              background: `url(\"https://img01.yzcdn.cn/upload_files/2023/07/31/FgxVIPCD5BtWgeaRkv88w6DrZrJj.png\") no-repeat center center`,\n              backgroundSize: \"contain\",\n            }}\n          >\n            <div className=\"flex weather-container\">\n              {daily.map((item) => {\n                return (\n                  <div className=\"weather-item\">\n                    <div className=\"weather-time-title\">\n                      <div className=\"weather-time-week\">\n                        周{getWeekStr(new Date(item.fxDate))}\n                      </div>\n                      <div className=\"weather-time-date\">\n                        {format(new Date(item.fxDate), \"M.D\")}\n                      </div>\n                    </div>\n                    <div className=\"weather-item-desc\">\n                      <img\n                        className=\"weather-item-icon\"\n                        width={150}\n                        src={getWeatherImgByIconDay(item.iconDay)}\n                        alt=\"天气\"\n                      />\n                      <div>\n                        {item.tempMin} ~ {item.tempMax}°C\n                      </div>\n                      <div>\n                        {item.windDirDay} {item.windScaleDay}级\n                      </div>\n                      <div>\n                        PM2.5{\" \"}\n                        <span\n                          style={{\n                            marginLeft: 8,\n                          }}\n                        >\n                          {item.category || \"良\"}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n            {currentValue ? (\n              <div className=\"shower-container flex\">\n                <div\n                  className=\"shower-item-img\"\n                  style={{\n                    backgroundImage: `url(\"${currentValue.posterUrl}\")`,\n                  }}\n                ></div>\n                <div className=\"shower-item-text\">\n                  <div>名称：{currentValue.name}</div>\n                  <div>时间：{currentValue.showTimeRange}</div>\n                  <div>地点：{currentValue.address}</div>\n                </div>\n              </div>\n            ) : null}\n          </div>\n        </div>\n      </div>\n      <RadioGroup\n        value={selected}\n        onChange={(e) => setSelected(e.target.value)}\n        className=\"scroll-container\"\n      >\n        {list.map((item) => {\n          return (\n            <Radio className=\"flex\" value={item.performanceId}>\n              <div\n                style={{\n                  display: \"inline-block\",\n                }}\n              >\n                <div className=\"flex\">\n                  <div className=\"list-item-img\">\n                    <img width={75} src={item.posterUrl} alt=\"天气\" />\n                  </div>\n                  <div>\n                    <div>名称：{item.name}</div>\n                    <div>时间：{item.showTimeRange}</div>\n                    <div>地点：{item.address}</div>\n                  </div>\n                </div>\n              </div>\n            </Radio>\n          );\n        })}\n      </RadioGroup>\n    </div>\n  );\n};\n\nexport default Page;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}